(()=>{"use strict";const e="05556916a9ab57a851784885d0ac5976",t=e=>{let t=e-273.15,n=9*t/5+32;return t=Math.round(10*t/10),n=Math.round(10*n/10),[t,n]};function n(e){let t=new Date(1e3*e),n=t.getFullYear(),r=["january","february","march","april","may","june","july","august","september","october","november","december"][t.getMonth()],i=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][t.getDay()],d=t.getDate(),a=t.getHours(),o=t.getMinutes();return a<10&&(a="0"+a),o<10&&(o="0"+o),{time:i+" "+r+" "+d+" "+n+" "+a+":"+o,day:i,hour:a}}let r="F",i="";const d=document.querySelector("#searchField");document.querySelector("#searchButton").addEventListener("click",(()=>{o(d.value)}));const a=document.querySelector("#tempMode");a.addEventListener("click",(()=>{"F"===r?(r="C",a.innerHTML="switch to &deg;F"):(r="F",a.innerHTML="switch to &deg;C"),o(i)}));const o=async d=>{let a=await(async t=>{let n=await(async t=>{try{let n=await fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${t}&limit=1&appid=${e}`,{mode:"cors"}),r=await n.json();return[r[0].lat,r[0].lon]}catch(e){console.log(e)}})(t),[r,i]=n,d=await(async(t,n)=>{const r=[`https://api.openweathermap.org/data/2.5/onecall?lat=${t}&lon=${n}&exclude=minutely&appid=${e}`];try{let e=await Promise.all(r.map((e=>fetch(e,{mode:"cors"}))));return(await Promise.all(e.map((e=>e.json()))))[0]}catch(e){console.log(e)}})(r,i);return d})(d);document.querySelector("#bannerTitle").innerHTML=d;let o=(e=>{let r=(e=>{let r,i=e.current,d=n(i.dt),a=i.weather[0].description,o=t(i.temp),[l,c]=o,m=t(i.feels_like),[u,p]=m;r=i.rain?Math.round(10*i.rain["1h"]/10):0;let h=i.humidity,s=i.wind_speed;return{currentTime:d.time,description:a,tempC:l,tempF:c,feelTempC:u,feelTempF:p,chanceRain:r,humidity:h,windSpeed:s}})(e),i=(e=>{let r=e.hourly,i=[];for(let e=0;e<12;e++){let d=n(r[e].dt),a=t(r[e].temp),[o,l]=a,c={hour:Number(d.hour),tempC:o,tempF:l};i.push(c)}return i})(e),d=(e=>{let r=e.daily,i=[];for(let e=0;e<7;e++){let d=n(r[e].dt),a=t(r[e].temp.min),[o,l]=a,c=t(r[e].temp.max),[m,u]=c,p={time:d.time,day:d.day,minTempC:o,minTempF:l,maxTempC:m,maxTempF:u};i.push(p)}return i})(e);return[r,i,d]})(a);console.log(o),((e,t)=>{let[n,r,i]=e;((e,t)=>{document.querySelector("#currentTime").innerHTML=e.currentTime,document.querySelector("#description").innerHTML=e.description,document.querySelector("#currentTemp").innerHTML="F"===t?`${e.tempF} &deg;F`:`${e.tempC} &deg;C`,document.querySelector("#feelTemp").innerHTML="F"===t?`<i><b>feels like</b></i>: ${e.feelTempF} &deg;F`:`<i><b>feels like</b></i>: ${e.feelTempC} &deg;C`,document.querySelector("#chanceRain").innerHTML=`<i><b>chance of rain</b></i>: ${e.chanceRain}%`,document.querySelector("#humidity").innerHTML=`<i><b>humidity</b></i>: ${e.humidity}%`,document.querySelector("#windSpeed").innerHTML=`<i><b>wind speed</b></i>: ${e.windSpeed} km/h`})(n,t),((e,t)=>{const n=document.querySelector("#hourlyDataContainer");n.innerHTML="";for(let r=0;r<12;r++){let i;i=0===e[r].hour?"12 AM":e[r].hour<12?`${e[r].hour} AM`:12===e[r].hour?"12 PM":e[r].hour-12+" PM";let d=document.createElement("div");d.id="hourContainer";let a=document.createElement("div");a.id="hourField",a.innerHTML=i,d.appendChild(a);let o=document.createElement("div");o.innerHTML="F"===t?`${e[r].tempF}&deg;`:`${e[r].tempC}&deg;`,d.appendChild(o),n.appendChild(d)}})(r,t),((e,t)=>{console.log(e);const n=document.querySelector("#dailyDataContainer");n.innerHTML="";for(let r=0;r<7;r++){let i=document.createElement("div");i.id="dayContainer";let d=document.createElement("div");d.innerHTML=`<b>${e[r].day}</b>`,i.appendChild(d);let a=document.createElement("div");a.id="hiField";let o=document.createElement("div");o.id="loField","F"===t?(a.innerHTML=`<b>hi</b>: ${e[r].maxTempF}&deg;`,o.innerHTML=`<b>lo</b>: ${e[r].minTempF}&deg;`):(a.innerHTML=`<b>hi</b>: ${e[r].maxTempC}&deg;`,o.innerHTML=`<b>lo</b>: ${e[r].minTempC}&deg;`),i.appendChild(a),i.appendChild(o),n.appendChild(i)}})(i,t)})(o,r),i=d};o("portland")})();